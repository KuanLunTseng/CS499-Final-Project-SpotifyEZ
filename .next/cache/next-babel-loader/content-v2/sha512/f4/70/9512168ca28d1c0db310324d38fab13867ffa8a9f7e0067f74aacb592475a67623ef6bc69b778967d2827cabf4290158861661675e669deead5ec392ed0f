{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\zengg\\\\Desktop\\\\CS499\\\\final-project-team-10-SpotifyEZ\\\\components\\\\PlaylistViewColumn.js\";\n\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport colors from '../styles/colors';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PlaylistView from './PlaylistView';\nimport PropTypes from 'prop-types';\nimport { removeItemsFromPlaylist } from '../store/actions/playlistAction'; //modal\n\nconst outerContainerStyling = css`\n    position: fixed;\n    top: 9%;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 1010;\n    overflow: scroll;\n    background-color: rgba(0, 0, 0, 0.65);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  `;\nconst containerStyling = css`\n    display:flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    div{\n      font-size: 40px;\n      padding: 10px;\n      margin: 5px;\n    }\n    input{\n      padding: 10px;\n      margin: 5px;\n      width: 80%;\n    }\n    textarea{\n      padding: 10px;\n      margin: 5px;\n      width: 80%;\n    }\n    .PlaylistDescription{\n      height: 50%;\n    }\n    background-color: floralwhite;\n    width: 40%;\n    height: 50%;\n    border-radius: 8px;\n  `;\nconst buttonContainerStyling = css`\n  display: flex;\n  flex-direction: row;\n  button{\n    width: 45%;\n    height: 80%;\n    padding: 5px;\n    margin: 5px;\n    border-radius: 8px;\n    border-style: solid;\n    border-width: 1px;\n\n  }\n`;\nconst PlaylistTitle = styled.div`\n  width: 100%;\n  text-align: center;\n  color: ${colors.black};\n  font-size: 40px;\n  font-weight: bold;\n  margin: 20px 0;\n  border: 2px solid ${colors.darkGreen};\n  border-radius: 10px;\n`;\nconst SaveSubPlaylistButton = styled.button`\n  position: fixed;\n  bottom: 40px;\n  right: 12.5%;\n  width: 200px;\n  height: 60px;\n  cursor: pointer;\n  border: 0;\n  border-radius:10px;\n  font-size: 125%;\n  color: white;\n  background-color: ${colors.darkGreen};\n  :hover {\n    background-color: ${colors.hoverGreen};\n  }\n`;\n\nfunction PlaylistViewColumn(props) {\n  const {\n    0: toggleModal,\n    1: setToggleModal\n  } = useState(false);\n  const {\n    0: playlistName,\n    1: setPlaylistName\n  } = useState(\"\");\n  const {\n    0: playlistDecription,\n    1: setPlaylistDescription\n  } = useState(\"\");\n  const {\n    accessToken\n  } = useSelector(state => state.auth);\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    0: removedSongUris,\n    1: setRemovedSongUris\n  } = useState([]);\n  const dispatch = useDispatch();\n\n  function createModalClicked(e) {\n    e.preventDefault();\n    makeNewPlaylist(playlistName, playlistDecription);\n    setToggleModal(!toggleModal);\n  }\n\n  function cancelModalClicked(e) {\n    e.preventDefault();\n    setToggleModal(!toggleModal);\n  }\n\n  function UpdatePlaylistName(e) {\n    setPlaylistName(e.target.value);\n  }\n\n  function UpdatePlaylistDescription(e) {\n    setPlaylistDescription(e.target.value);\n  }\n\n  const styles = css`\n    width: 45%;\n    float: left;\n    padding: 0 20px;\n  `;\n\n  function removeFromplaylist(uri) {\n    //TODO: Is there a way to not remove duplicate songs?\n    // props.setPlaylist([\n    //   ...props.playlist.filter(track => track.uri !== uri),\n    //   ...props.addedSongs.filter(track => track.uri !== uri)\n    // ])\n    setRemovedSongUris([...removedSongUris, uri]);\n  }\n\n  async function makeNewPlaylist(nameOfSong, nameOfPlaylist) {\n    const getOptions = (accessToken, url, data) => {\n      return {\n        url: url,\n        method: 'POST',\n        headers: {\n          'Authorization': 'Bearer ' + accessToken,\n          'Content-Type': 'application/json'\n        },\n        data: data\n      };\n    };\n\n    try {\n      const url = `https://api.spotify.com/v1/users/${user.id}/playlists`;\n      axios(getOptions(accessToken, url, {\n        'name': nameOfSong,\n        'description': nameOfPlaylist,\n        'public': 'false'\n      })).then(function (response) {\n        console.log(\"Make new playlist response:\", response);\n        putItemsInPlaylist(response.data.id); //setMakingplaylist(false)\n      });\n    } catch (e) {\n      if (e instanceof DOMException) {\n        console.log(\"HTTP request aborted\");\n      } else {\n        console.log(e);\n      }\n    }\n  }\n\n  async function putItemsInPlaylist(id) {\n    const options = {\n      url: `https://api.spotify.com/v1/playlists/${id}/tracks?uris=${encodeURIComponent(props.addedSongs.map(uri => uri.uri))}`,\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken,\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      axios(options).then(function (response) {\n        console.log(\"Putting Items in that new playlist: \", response);\n      });\n    } catch (e) {\n      if (e instanceof DOMException) {\n        console.log(\"HTTP request aborted\");\n      } else {\n        console.log(e);\n      }\n    }\n  }\n\n  async function savePlaylist() {\n    if (props.playlistId) {\n      console.log(\"Adding to this playlist: \", props.playlistId);\n      putItemsInPlaylist(props.playlistId); // removedSongUris\n\n      const body = {\n        'tracks': removedSongUris.map(uri => {\n          return {\n            'uri': uri\n          };\n        })\n      };\n      console.log(\"BODYYYYYYYYYYYY\", body);\n      dispatch(removeItemsFromPlaylist(props.playlistId, body));\n    } else {\n      console.log(\"Making a new playlist\"); //TOGGLE MODAL, let the user enter the playlist data\n      //onSUBMIT, pass data to makeNewPlaylist\n\n      setToggleModal(!toggleModal);\n    }\n  }\n\n  console.log(\"PlaylistViewColumn props: \", props);\n  return _jsxDEV(\"div\", {\n    css: styles,\n    children: [_jsxDEV(PlaylistTitle, {\n      children: props.playlistTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), props.menu, _jsxDEV(PlaylistView, {\n      playlist: props.addedSongs ? props.addedSongs : [],\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), _jsxDEV(PlaylistView, {\n      playlist: props.playlist,\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), (props.addedSongs && props.addedSongs.length > 0 || removedSongUris.length > 0) && _jsxDEV(SaveSubPlaylistButton, {\n      onClick: () => {\n        savePlaylist();\n      },\n      children: \"Save Sub-Playlist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this), _jsxDEV(\"div\", {\n      children: toggleModal ? _jsxDEV(\"div\", {\n        css: outerContainerStyling,\n        children: _jsxDEV(\"form\", {\n          css: containerStyling,\n          children: [_jsxDEV(\"div\", {\n            children: \"New playlist information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), _jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Playlist name...\",\n            onChange: UpdatePlaylistName,\n            value: playlistName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), _jsxDEV(\"textarea\", {\n            className: \"PlaylistDescription\",\n            type: \"text\",\n            placeholder: \"Playlist description...\",\n            onChange: UpdatePlaylistDescription,\n            value: playlistDecription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this), _jsxDEV(\"div\", {\n            css: buttonContainerStyling,\n            children: [_jsxDEV(\"button\", {\n              onClick: cancelModalClicked,\n              children: \" Cancel \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), _jsxDEV(\"button\", {\n              onClick: createModalClicked,\n              children: \" Add new playlist \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n\nPlaylistViewColumn.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  addedSongs: PropTypes.array,\n  setPlaylist: PropTypes.func.isRequired,\n  playlistTitle: PropTypes.string,\n  playlistId: PropTypes.string,\n  menu: PropTypes.element,\n  hasPlusButton: PropTypes.boolean,\n  hasMinusButton: PropTypes.boolean,\n  onPlusButtonClick: PropTypes.func\n};\nPlaylistViewColumn.defaultProps = {\n  addedSongs: [],\n  playlistTitle: \"\",\n  playlistId: \"\",\n  menu: null,\n  hasPlusButton: false,\n  hasMinusButton: false,\n  onPlusButtonClick: null\n};\nexport default PlaylistViewColumn;","map":{"version":3,"sources":["C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/components/PlaylistViewColumn.js"],"names":["css","styled","colors","axios","useEffect","useState","useDispatch","useSelector","PlaylistView","PropTypes","removeItemsFromPlaylist","outerContainerStyling","containerStyling","buttonContainerStyling","PlaylistTitle","div","black","darkGreen","SaveSubPlaylistButton","button","hoverGreen","PlaylistViewColumn","props","toggleModal","setToggleModal","playlistName","setPlaylistName","playlistDecription","setPlaylistDescription","accessToken","state","auth","user","removedSongUris","setRemovedSongUris","dispatch","createModalClicked","e","preventDefault","makeNewPlaylist","cancelModalClicked","UpdatePlaylistName","target","value","UpdatePlaylistDescription","styles","removeFromplaylist","uri","nameOfSong","nameOfPlaylist","getOptions","url","data","method","headers","id","then","response","console","log","putItemsInPlaylist","DOMException","options","encodeURIComponent","addedSongs","map","savePlaylist","playlistId","body","playlistTitle","menu","hasPlusButton","onPlusButtonClick","hasMinusButton","playlist","length","propTypes","object","isRequired","array","setPlaylist","func","string","element","boolean","defaultProps"],"mappings":";;;AAAA;AACA,SAASA,GAAT,QAAoB,gBAApB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,uBAAT,QAAwC,iCAAxC,C,CACA;;AAEA,MAAMC,qBAAqB,GAAGX,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAZA;AAaA,MAAMY,gBAAgB,GAAGZ,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA3BA;AA4BA,MAAMa,sBAAsB,GAAGb,GAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAbA;AAgBA,MAAMc,aAAa,GAAGb,MAAM,CAACc,GAAI;AACjC;AACA;AACA,WAAWb,MAAM,CAACc,KAAM;AACxB;AACA;AACA;AACA,sBAAsBd,MAAM,CAACe,SAAU;AACvC;AACA,CATA;AAWA,MAAMC,qBAAqB,GAAGjB,MAAM,CAACkB,MAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsBjB,MAAM,CAACe,SAAU;AACvC;AACA,wBAAwBf,MAAM,CAACkB,UAAW;AAC1C;AACA,CAfA;;AAiBA,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AACjC,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCnB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAA,OAACoB,YAAD;AAAA,OAAeC;AAAf,MAAkCrB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAA,OAACsB,kBAAD;AAAA,OAAqBC;AAArB,MAA+CvB,QAAQ,CAAC,EAAD,CAA7D;AACA,QAAM;AAAEwB,IAAAA;AAAF,MAAkBtB,WAAW,CAACuB,KAAK,IAAIA,KAAK,CAACC,IAAhB,CAAnC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAWzB,WAAW,CAACuB,KAAK,IAAIA,KAAK,CAACE,IAAhB,CAA5B;AACA,QAAM;AAAA,OAACC,eAAD;AAAA,OAAkBC;AAAlB,MAAwC7B,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM8B,QAAQ,GAAG7B,WAAW,EAA5B;;AACA,WAAS8B,kBAAT,CAA4BC,CAA5B,EAA+B;AAC7BA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,eAAe,CAACd,YAAD,EAAeE,kBAAf,CAAf;AACAH,IAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AACD;;AACD,WAASiB,kBAAT,CAA4BH,CAA5B,EAA+B;AAC7BA,IAAAA,CAAC,CAACC,cAAF;AACAd,IAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AACD;;AAED,WAASkB,kBAAT,CAA4BJ,CAA5B,EAA+B;AAC7BX,IAAAA,eAAe,CAACW,CAAC,CAACK,MAAF,CAASC,KAAV,CAAf;AACD;;AACD,WAASC,yBAAT,CAAmCP,CAAnC,EAAsC;AACpCT,IAAAA,sBAAsB,CAACS,CAAC,CAACK,MAAF,CAASC,KAAV,CAAtB;AACD;;AACD,QAAME,MAAM,GAAG7C,GAAI;AACrB;AACA;AACA;AACA,GAJE;;AAMA,WAAS8C,kBAAT,CAA4BC,GAA5B,EAAiC;AAC/B;AACA;AACA;AACA;AACA;AAEAb,IAAAA,kBAAkB,CAAC,CAAC,GAAGD,eAAJ,EAAqBc,GAArB,CAAD,CAAlB;AACD;;AAED,iBAAeR,eAAf,CAA+BS,UAA/B,EAA2CC,cAA3C,EAA2D;AACzD,UAAMC,UAAU,GAAG,CAACrB,WAAD,EAAcsB,GAAd,EAAmBC,IAAnB,KAA4B;AAC7C,aAAO;AACLD,QAAAA,GAAG,EAAEA,GADA;AAELE,QAAAA,MAAM,EAAE,MAFH;AAGLC,QAAAA,OAAO,EAAE;AACP,2BAAiB,YAAYzB,WADtB;AAEP,0BAAgB;AAFT,SAHJ;AAOLuB,QAAAA,IAAI,EAAEA;AAPD,OAAP;AASD,KAVD;;AAWA,QAAI;AACF,YAAMD,GAAG,GAAI,oCAAmCnB,IAAI,CAACuB,EAAG,YAAxD;AACApD,MAAAA,KAAK,CAAC+C,UAAU,CAACrB,WAAD,EAAcsB,GAAd,EAAmB;AACjC,gBAAQH,UADyB;AAEjC,uBAAeC,cAFkB;AAGjC,kBAAU;AAHuB,OAAnB,CAAX,CAAL,CAKGO,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxBC,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,QAA3C;AACAG,QAAAA,kBAAkB,CAACH,QAAQ,CAACL,IAAT,CAAcG,EAAf,CAAlB,CAFwB,CAGxB;AACD,OATH;AAUD,KAZD,CAYE,OAAOlB,CAAP,EAAU;AACV,UAAIA,CAAC,YAAYwB,YAAjB,EAA+B;AAC7BH,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,OAFD,MAEO;AACLD,QAAAA,OAAO,CAACC,GAAR,CAAYtB,CAAZ;AACD;AACF;AACF;;AAED,iBAAeuB,kBAAf,CAAkCL,EAAlC,EAAsC;AACpC,UAAMO,OAAO,GAAG;AACdX,MAAAA,GAAG,EAAG,wCAAuCI,EAAG,gBAAeQ,kBAAkB,CAACzC,KAAK,CAAC0C,UAAN,CAAiBC,GAAjB,CAAsBlB,GAAD,IAASA,GAAG,CAACA,GAAlC,CAAD,CAAyC,EAD5G;AAEdM,MAAAA,MAAM,EAAE,MAFM;AAGdC,MAAAA,OAAO,EAAE;AACP,yBAAiB,YAAYzB,WADtB;AAEP,wBAAgB;AAFT;AAHK,KAAhB;;AAQA,QAAI;AACF1B,MAAAA,KAAK,CAAC2D,OAAD,CAAL,CACGN,IADH,CACQ,UAAUC,QAAV,EAAoB;AACxBC,QAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDF,QAApD;AACD,OAHH;AAID,KALD,CAKE,OAAOpB,CAAP,EAAU;AACV,UAAIA,CAAC,YAAYwB,YAAjB,EAA+B;AAC7BH,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,OAFD,MAEO;AACLD,QAAAA,OAAO,CAACC,GAAR,CAAYtB,CAAZ;AACD;AACF;AACF;;AACD,iBAAe6B,YAAf,GAA8B;AAE5B,QAAI5C,KAAK,CAAC6C,UAAV,EAAsB;AACpBT,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCrC,KAAK,CAAC6C,UAA/C;AACAP,MAAAA,kBAAkB,CAACtC,KAAK,CAAC6C,UAAP,CAAlB,CAFoB,CAIpB;;AAEA,YAAMC,IAAI,GAAG;AACX,kBAAUnC,eAAe,CAACgC,GAAhB,CAAqBlB,GAAD,IAAS;AACrC,iBAAO;AAAE,mBAAOA;AAAT,WAAP;AACD,SAFS;AADC,OAAb;AAMAW,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BS,IAA/B;AACAjC,MAAAA,QAAQ,CAACzB,uBAAuB,CAACY,KAAK,CAAC6C,UAAP,EAAmBC,IAAnB,CAAxB,CAAR;AACD,KAdD,MAcO;AACLV,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EADK,CAEL;AACA;;AACAnC,MAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AAED;AACF;;AAEDmC,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CrC,KAA1C;AACA,SACE;AAAK,IAAA,GAAG,EAAEuB,MAAV;AAAA,eACE,QAAC,aAAD;AAAA,gBAAgBvB,KAAK,CAAC+C;AAAtB;AAAA;AAAA;AAAA;AAAA,YADF,EAEG/C,KAAK,CAACgD,IAFT,EAGE,QAAC,YAAD;AACE,MAAA,QAAQ,EAAEhD,KAAK,CAAC0C,UAAN,GAAmB1C,KAAK,CAAC0C,UAAzB,GAAsC,EADlD;AAEE,MAAA,aAAa,EAAE1C,KAAK,CAACiD,aAFvB;AAGE,MAAA,iBAAiB,EAAEjD,KAAK,CAACkD,iBAH3B;AAIE,MAAA,cAAc,EAAElD,KAAK,CAACmD,cAJxB;AAKE,MAAA,kBAAkB,EAAE3B;AALtB;AAAA;AAAA;AAAA;AAAA,YAHF,EAUE,QAAC,YAAD;AACE,MAAA,QAAQ,EAAExB,KAAK,CAACoD,QADlB;AAEE,MAAA,aAAa,EAAEpD,KAAK,CAACiD,aAFvB;AAGE,MAAA,iBAAiB,EAAEjD,KAAK,CAACkD,iBAH3B;AAIE,MAAA,cAAc,EAAElD,KAAK,CAACmD,cAJxB;AAKE,MAAA,kBAAkB,EAAE3B;AALtB;AAAA;AAAA;AAAA;AAAA,YAVF,EAiBG,CAAExB,KAAK,CAAC0C,UAAN,IAAoB1C,KAAK,CAAC0C,UAAN,CAAiBW,MAAjB,GAA0B,CAA/C,IAAqD1C,eAAe,CAAC0C,MAAhB,GAAyB,CAA/E,KACC,QAAC,qBAAD;AACE,MAAA,OAAO,EAAE,MAAM;AAAET,QAAAA,YAAY;AAAI,OADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAlBJ,EAuBE;AAAA,gBACG3C,WAAW,GACV;AAAK,QAAA,GAAG,EAAEZ,qBAAV;AAAA,kBACE;AAAM,UAAA,GAAG,EAAEC,gBAAX;AAAA,qBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,WAAW,EAAC,kBAA/B;AAAkD,YAAA,QAAQ,EAAE6B,kBAA5D;AAAgF,YAAA,KAAK,EAAEhB;AAAvF;AAAA;AAAA;AAAA;AAAA,kBAFF,EAGE;AAAU,YAAA,SAAS,EAAC,qBAApB;AAA0C,YAAA,IAAI,EAAC,MAA/C;AAAsD,YAAA,WAAW,EAAC,yBAAlE;AAA4F,YAAA,QAAQ,EAAEmB,yBAAtG;AAAiI,YAAA,KAAK,EAAEjB;AAAxI;AAAA;AAAA;AAAA;AAAA,kBAHF,EAKE;AAAK,YAAA,GAAG,EAAEd,sBAAV;AAAA,uBACE;AAAQ,cAAA,OAAO,EAAE2B,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAQ,cAAA,OAAO,EAAEJ,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADU,GAaR;AAdN;AAAA;AAAA;AAAA;AAAA,YAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA2CD;;AAEDf,kBAAkB,CAACuD,SAAnB,GAA+B;AAC7BF,EAAAA,QAAQ,EAAEjE,SAAS,CAACoE,MAAV,CAAiBC,UADE;AAE7Bd,EAAAA,UAAU,EAAEvD,SAAS,CAACsE,KAFO;AAG7BC,EAAAA,WAAW,EAAEvE,SAAS,CAACwE,IAAV,CAAeH,UAHC;AAI7BT,EAAAA,aAAa,EAAE5D,SAAS,CAACyE,MAJI;AAK7Bf,EAAAA,UAAU,EAAE1D,SAAS,CAACyE,MALO;AAM7BZ,EAAAA,IAAI,EAAE7D,SAAS,CAAC0E,OANa;AAO7BZ,EAAAA,aAAa,EAAE9D,SAAS,CAAC2E,OAPI;AAQ7BX,EAAAA,cAAc,EAAEhE,SAAS,CAAC2E,OARG;AAS7BZ,EAAAA,iBAAiB,EAAE/D,SAAS,CAACwE;AATA,CAA/B;AAYA5D,kBAAkB,CAACgE,YAAnB,GAAkC;AAChCrB,EAAAA,UAAU,EAAE,EADoB;AAEhCK,EAAAA,aAAa,EAAE,EAFiB;AAGhCF,EAAAA,UAAU,EAAE,EAHoB;AAIhCG,EAAAA,IAAI,EAAE,IAJ0B;AAKhCC,EAAAA,aAAa,EAAE,KALiB;AAMhCE,EAAAA,cAAc,EAAE,KANgB;AAOhCD,EAAAA,iBAAiB,EAAE;AAPa,CAAlC;AAUA,eAAenD,kBAAf","sourcesContent":["/** @jsxImportSource @emotion/react */\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\nimport colors from '../styles/colors';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport PlaylistView from './PlaylistView';\r\nimport PropTypes from 'prop-types';\r\nimport { removeItemsFromPlaylist } from '../store/actions/playlistAction'\r\n//modal\r\n\r\nconst outerContainerStyling = css`\r\n    position: fixed;\r\n    top: 9%;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1010;\r\n    overflow: scroll;\r\n    background-color: rgba(0, 0, 0, 0.65);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  `;\r\nconst containerStyling = css`\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    div{\r\n      font-size: 40px;\r\n      padding: 10px;\r\n      margin: 5px;\r\n    }\r\n    input{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    textarea{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    .PlaylistDescription{\r\n      height: 50%;\r\n    }\r\n    background-color: floralwhite;\r\n    width: 40%;\r\n    height: 50%;\r\n    border-radius: 8px;\r\n  `;\r\nconst buttonContainerStyling = css`\r\n  display: flex;\r\n  flex-direction: row;\r\n  button{\r\n    width: 45%;\r\n    height: 80%;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    border-radius: 8px;\r\n    border-style: solid;\r\n    border-width: 1px;\r\n\r\n  }\r\n`;\r\n\r\n\r\nconst PlaylistTitle = styled.div`\r\n  width: 100%;\r\n  text-align: center;\r\n  color: ${colors.black};\r\n  font-size: 40px;\r\n  font-weight: bold;\r\n  margin: 20px 0;\r\n  border: 2px solid ${colors.darkGreen};\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst SaveSubPlaylistButton = styled.button`\r\n  position: fixed;\r\n  bottom: 40px;\r\n  right: 12.5%;\r\n  width: 200px;\r\n  height: 60px;\r\n  cursor: pointer;\r\n  border: 0;\r\n  border-radius:10px;\r\n  font-size: 125%;\r\n  color: white;\r\n  background-color: ${colors.darkGreen};\r\n  :hover {\r\n    background-color: ${colors.hoverGreen};\r\n  }\r\n`;\r\n\r\nfunction PlaylistViewColumn(props) {\r\n  const [toggleModal, setToggleModal] = useState(false)\r\n  const [playlistName, setPlaylistName] = useState(\"\")\r\n  const [playlistDecription, setPlaylistDescription] = useState(\"\")\r\n  const { accessToken } = useSelector(state => state.auth)\r\n  const { user } = useSelector(state => state.user)\r\n  const [removedSongUris, setRemovedSongUris] = useState([])\r\n  const dispatch = useDispatch()\r\n  function createModalClicked(e) {\r\n    e.preventDefault();\r\n    makeNewPlaylist(playlistName, playlistDecription)\r\n    setToggleModal(!toggleModal)\r\n  }\r\n  function cancelModalClicked(e) {\r\n    e.preventDefault();\r\n    setToggleModal(!toggleModal)\r\n  }\r\n\r\n  function UpdatePlaylistName(e) {\r\n    setPlaylistName(e.target.value)\r\n  }\r\n  function UpdatePlaylistDescription(e) {\r\n    setPlaylistDescription(e.target.value)\r\n  }\r\n  const styles = css`\r\n    width: 45%;\r\n    float: left;\r\n    padding: 0 20px;\r\n  `;\r\n\r\n  function removeFromplaylist(uri) {\r\n    //TODO: Is there a way to not remove duplicate songs?\r\n    // props.setPlaylist([\r\n    //   ...props.playlist.filter(track => track.uri !== uri),\r\n    //   ...props.addedSongs.filter(track => track.uri !== uri)\r\n    // ])\r\n\r\n    setRemovedSongUris([...removedSongUris, uri])\r\n  }\r\n\r\n  async function makeNewPlaylist(nameOfSong, nameOfPlaylist) {\r\n    const getOptions = (accessToken, url, data) => {\r\n      return {\r\n        url: url,\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + accessToken,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        data: data\r\n      }\r\n    }\r\n    try {\r\n      const url = `https://api.spotify.com/v1/users/${user.id}/playlists`\r\n      axios(getOptions(accessToken, url, {\r\n        'name': nameOfSong,\r\n        'description': nameOfPlaylist,\r\n        'public': 'false'\r\n      }))\r\n        .then(function (response) {\r\n          console.log(\"Make new playlist response:\", response)\r\n          putItemsInPlaylist(response.data.id)\r\n          //setMakingplaylist(false)\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function putItemsInPlaylist(id) {\r\n    const options = {\r\n      url: `https://api.spotify.com/v1/playlists/${id}/tracks?uris=${encodeURIComponent(props.addedSongs.map((uri) => uri.uri))}`,\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': 'Bearer ' + accessToken,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    }\r\n    try {\r\n      axios(options)\r\n        .then(function (response) {\r\n          console.log(\"Putting Items in that new playlist: \", response);\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n  async function savePlaylist() {\r\n\r\n    if (props.playlistId) {\r\n      console.log(\"Adding to this playlist: \", props.playlistId);\r\n      putItemsInPlaylist(props.playlistId)\r\n\r\n      // removedSongUris\r\n\r\n      const body = {\r\n        'tracks': removedSongUris.map((uri) => {\r\n          return { 'uri': uri }\r\n        })\r\n      }\r\n\r\n      console.log(\"BODYYYYYYYYYYYY\", body)\r\n      dispatch(removeItemsFromPlaylist(props.playlistId, body))\r\n    } else {\r\n      console.log(\"Making a new playlist\");\r\n      //TOGGLE MODAL, let the user enter the playlist data\r\n      //onSUBMIT, pass data to makeNewPlaylist\r\n      setToggleModal(!toggleModal)\r\n\r\n    }\r\n  }\r\n\r\n  console.log(\"PlaylistViewColumn props: \", props);\r\n  return (\r\n    <div css={styles}>\r\n      <PlaylistTitle>{props.playlistTitle}</PlaylistTitle>\r\n      {props.menu}\r\n      <PlaylistView\r\n        playlist={props.addedSongs ? props.addedSongs : []}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      <PlaylistView\r\n        playlist={props.playlist}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      {((props.addedSongs && props.addedSongs.length > 0) || removedSongUris.length > 0) &&\r\n        <SaveSubPlaylistButton\r\n          onClick={() => { savePlaylist() }}>\r\n          Save Sub-Playlist\r\n        </SaveSubPlaylistButton>\r\n      }\r\n      <div>\r\n        {toggleModal ? (\r\n          <div css={outerContainerStyling}>\r\n            <form css={containerStyling}>\r\n              <div>New playlist information</div>\r\n              <input type=\"text\" placeholder=\"Playlist name...\" onChange={UpdatePlaylistName} value={playlistName} />\r\n              <textarea className=\"PlaylistDescription\" type=\"text\" placeholder=\"Playlist description...\" onChange={UpdatePlaylistDescription} value={playlistDecription} />\r\n\r\n              <div css={buttonContainerStyling}>\r\n                <button onClick={cancelModalClicked}> Cancel </button>\r\n                <button onClick={createModalClicked}> Add new playlist </button>\r\n              </div>\r\n            </form>\r\n          </div>)\r\n          : null\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nPlaylistViewColumn.propTypes = {\r\n  playlist: PropTypes.object.isRequired,\r\n  addedSongs: PropTypes.array,\r\n  setPlaylist: PropTypes.func.isRequired,\r\n  playlistTitle: PropTypes.string,\r\n  playlistId: PropTypes.string,\r\n  menu: PropTypes.element,\r\n  hasPlusButton: PropTypes.boolean,\r\n  hasMinusButton: PropTypes.boolean,\r\n  onPlusButtonClick: PropTypes.func\r\n}\r\n\r\nPlaylistViewColumn.defaultProps = {\r\n  addedSongs: [],\r\n  playlistTitle: \"\",\r\n  playlistId: \"\",\r\n  menu: null,\r\n  hasPlusButton: false,\r\n  hasMinusButton: false,\r\n  onPlusButtonClick: null\r\n}\r\n\r\nexport default PlaylistViewColumn;\r\n"]},"metadata":{},"sourceType":"module"}