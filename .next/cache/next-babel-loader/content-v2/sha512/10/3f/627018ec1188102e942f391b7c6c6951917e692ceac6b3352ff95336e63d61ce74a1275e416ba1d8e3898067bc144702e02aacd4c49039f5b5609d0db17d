{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\zengg\\\\Desktop\\\\CS499\\\\final-project-team-10-SpotifyEZ\\\\components\\\\PlaylistViewColumn.js\",\n    _s = $RefreshSig$();\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 45%;\\n    float: left;\\n    padding: 0 20px;\\n  \"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  position: fixed;\\n  bottom: 40px;\\n  right: 12.5%;\\n  width: 200px;\\n  height: 60px;\\n  cursor: pointer;\\n  border: 0;\\n  border-radius:10px;\\n  font-size: 125%;\\n  color: white;\\n  background-color: \", \";\\n  :hover {\\n    background-color: \", \";\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  text-align: center;\\n  color: \", \";\\n  font-size: 40px;\\n  font-weight: bold;\\n  margin: 20px 0;\\n  border: 2px solid \", \";\\n  border-radius: 10px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  button{\\n    width: 45%;\\n    height: 80%;\\n    padding: 5px;\\n    margin: 5px;\\n    border-radius: 8px;\\n    border-style: solid;\\n    border-width: 1px;\\n\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    display:flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    div{\\n      font-size: 40px;\\n      padding: 10px;\\n      margin: 5px;\\n    }\\n    input{\\n      padding: 10px;\\n      margin: 5px;\\n      width: 80%;\\n    }\\n    textarea{\\n      padding: 10px;\\n      margin: 5px;\\n      width: 80%;\\n    }\\n    .PlaylistDescription{\\n      height: 50%;\\n    }\\n    background-color: floralwhite;\\n    width: 40%;\\n    height: 50%;\\n    border-radius: 8px;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    position: fixed;\\n    top: 9%;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    z-index: 1010;\\n    overflow: scroll;\\n    background-color: rgba(0, 0, 0, 0.65);\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport colors from '../styles/colors';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PlaylistView from './PlaylistView';\nimport PropTypes from 'prop-types';\nimport { removeItemsFromPlaylist } from '../store/actions/playlistAction'; //modal\n\nvar outerContainerStyling = css(_templateObject());\nvar containerStyling = css(_templateObject2());\nvar buttonContainerStyling = css(_templateObject3());\nvar PlaylistTitle = styled.div(_templateObject4(), colors.black, colors.darkGreen);\n_c = PlaylistTitle;\nvar SaveSubPlaylistButton = styled.button(_templateObject5(), colors.darkGreen, colors.hoverGreen);\n_c2 = SaveSubPlaylistButton;\n\nfunction PlaylistViewColumn(props) {\n  _s();\n\n  var _useState = useState(false),\n      toggleModal = _useState[0],\n      setToggleModal = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      playlistName = _useState2[0],\n      setPlaylistName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      playlistDecription = _useState3[0],\n      setPlaylistDescription = _useState3[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      accessToken = _useSelector.accessToken;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      user = _useSelector2.user;\n\n  var _useState4 = useState([]),\n      removedSongUris = _useState4[0],\n      setRemovedSongUris = _useState4[1];\n\n  var dispatch = useDispatch();\n\n  function createModalClicked(e) {\n    e.preventDefault();\n    makeNewPlaylist(playlistName, playlistDecription);\n    setToggleModal(!toggleModal);\n  }\n\n  function cancelModalClicked(e) {\n    e.preventDefault();\n    setToggleModal(!toggleModal);\n  }\n\n  function UpdatePlaylistName(e) {\n    setPlaylistName(e.target.value);\n  }\n\n  function UpdatePlaylistDescription(e) {\n    setPlaylistDescription(e.target.value);\n  }\n\n  var styles = css(_templateObject6());\n\n  function removeFromplaylist(uri) {\n    //TODO: Is there a way to not remove duplicate songs?\n    // props.setPlaylist([\n    //   ...props.playlist.filter(track => track.uri !== uri),\n    //   ...props.addedSongs.filter(track => track.uri !== uri)\n    // ])\n    setRemovedSongUris([].concat(_toConsumableArray(removedSongUris), [uri]));\n  }\n\n  function makeNewPlaylist(_x, _x2) {\n    return _makeNewPlaylist.apply(this, arguments);\n  }\n\n  function _makeNewPlaylist() {\n    _makeNewPlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(nameOfSong, nameOfPlaylist) {\n      var getOptions, url;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              getOptions = function getOptions(accessToken, url, data) {\n                return {\n                  url: url,\n                  method: 'POST',\n                  headers: {\n                    'Authorization': 'Bearer ' + accessToken,\n                    'Content-Type': 'application/json'\n                  },\n                  data: data\n                };\n              };\n\n              try {\n                url = \"https://api.spotify.com/v1/users/\".concat(user.id, \"/playlists\");\n                axios(getOptions(accessToken, url, {\n                  'name': nameOfSong,\n                  'description': nameOfPlaylist,\n                  'public': 'false'\n                })).then(function (response) {\n                  console.log(\"Make new playlist response:\", response);\n                  putItemsInPlaylist(response.data.id); //setMakingplaylist(false)\n                });\n              } catch (e) {\n                if (e instanceof DOMException) {\n                  console.log(\"HTTP request aborted\");\n                } else {\n                  console.log(e);\n                }\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _makeNewPlaylist.apply(this, arguments);\n  }\n\n  function putItemsInPlaylist(_x3) {\n    return _putItemsInPlaylist.apply(this, arguments);\n  }\n\n  function _putItemsInPlaylist() {\n    _putItemsInPlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var options;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              options = {\n                url: \"https://api.spotify.com/v1/playlists/\".concat(id, \"/tracks?uris=\").concat(encodeURIComponent(props.addedSongs.map(function (uri) {\n                  return uri.uri;\n                }))),\n                method: 'POST',\n                headers: {\n                  'Authorization': 'Bearer ' + accessToken,\n                  'Content-Type': 'application/json'\n                }\n              };\n\n              try {\n                axios(options).then(function (response) {\n                  console.log(\"Putting Items in that new playlist: \", response);\n                });\n              } catch (e) {\n                if (e instanceof DOMException) {\n                  console.log(\"HTTP request aborted\");\n                } else {\n                  console.log(e);\n                }\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _putItemsInPlaylist.apply(this, arguments);\n  }\n\n  function savePlaylist() {\n    return _savePlaylist.apply(this, arguments);\n  }\n\n  function _savePlaylist() {\n    _savePlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var body;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (props.playlistId) {\n                console.log(\"Adding to this playlist: \", props.playlistId);\n                putItemsInPlaylist(props.playlistId); // removedSongUris\n\n                body = {\n                  'tracks': removedSongUris.map(function (uri) {\n                    return {\n                      'uri': uri\n                    };\n                  })\n                };\n                console.log(\"BODYYYYYYYYYYYY\", body);\n                dispatch(removeItemsFromPlaylist(props.playlistId, body));\n              } else {\n                console.log(\"Making a new playlist\"); //TOGGLE MODAL, let the user enter the playlist data\n                //onSUBMIT, pass data to makeNewPlaylist\n\n                setToggleModal(!toggleModal);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _savePlaylist.apply(this, arguments);\n  }\n\n  console.log(\"PlaylistViewColumn props: \", props);\n  return _jsxDEV(\"div\", {\n    css: styles,\n    children: [_jsxDEV(PlaylistTitle, {\n      children: props.playlistTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), props.menu, _jsxDEV(PlaylistView, {\n      playlist: props.addedSongs ? props.addedSongs : [],\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), _jsxDEV(PlaylistView, {\n      playlist: props.playlist,\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), (props.addedSongs && props.addedSongs.length > 0 || removedSongUris.length > 0) && _jsxDEV(SaveSubPlaylistButton, {\n      onClick: function onClick() {\n        savePlaylist();\n      },\n      children: \"Save Sub-Playlist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this), _jsxDEV(\"div\", {\n      children: toggleModal ? _jsxDEV(\"div\", {\n        css: outerContainerStyling,\n        children: _jsxDEV(\"form\", {\n          css: containerStyling,\n          children: [_jsxDEV(\"div\", {\n            children: \"New playlist information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), _jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Playlist name...\",\n            onChange: UpdatePlaylistName,\n            value: playlistName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), _jsxDEV(\"textarea\", {\n            className: \"PlaylistDescription\",\n            type: \"text\",\n            placeholder: \"Playlist description...\",\n            onChange: UpdatePlaylistDescription,\n            value: playlistDecription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this), _jsxDEV(\"div\", {\n            css: buttonContainerStyling,\n            children: [_jsxDEV(\"button\", {\n              onClick: cancelModalClicked,\n              children: \" Cancel \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), _jsxDEV(\"button\", {\n              onClick: createModalClicked,\n              children: \" Add new playlist \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PlaylistViewColumn, \"3T0GsN8gHV/5bECzkLF55CLDUiU=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c3 = PlaylistViewColumn;\nPlaylistViewColumn.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  addedSongs: PropTypes.array,\n  setPlaylist: PropTypes.func.isRequired,\n  playlistTitle: PropTypes.string,\n  playlistId: PropTypes.string,\n  menu: PropTypes.element,\n  hasPlusButton: PropTypes[\"boolean\"],\n  hasMinusButton: PropTypes[\"boolean\"],\n  onPlusButtonClick: PropTypes.func\n};\nPlaylistViewColumn.defaultProps = {\n  addedSongs: [],\n  playlistTitle: \"\",\n  playlistId: \"\",\n  menu: null,\n  hasPlusButton: false,\n  hasMinusButton: false,\n  onPlusButtonClick: null\n};\nexport default PlaylistViewColumn;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"PlaylistTitle\");\n$RefreshReg$(_c2, \"SaveSubPlaylistButton\");\n$RefreshReg$(_c3, \"PlaylistViewColumn\");","map":{"version":3,"sources":["C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/components/PlaylistViewColumn.js"],"names":["css","styled","colors","axios","useEffect","useState","useDispatch","useSelector","PlaylistView","PropTypes","removeItemsFromPlaylist","outerContainerStyling","containerStyling","buttonContainerStyling","PlaylistTitle","div","black","darkGreen","SaveSubPlaylistButton","button","hoverGreen","PlaylistViewColumn","props","toggleModal","setToggleModal","playlistName","setPlaylistName","playlistDecription","setPlaylistDescription","state","auth","accessToken","user","removedSongUris","setRemovedSongUris","dispatch","createModalClicked","e","preventDefault","makeNewPlaylist","cancelModalClicked","UpdatePlaylistName","target","value","UpdatePlaylistDescription","styles","removeFromplaylist","uri","nameOfSong","nameOfPlaylist","getOptions","url","data","method","headers","id","then","response","console","log","putItemsInPlaylist","DOMException","options","encodeURIComponent","addedSongs","map","savePlaylist","playlistId","body","playlistTitle","menu","hasPlusButton","onPlusButtonClick","hasMinusButton","playlist","length","propTypes","object","isRequired","array","setPlaylist","func","string","element","defaultProps"],"mappings":"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","sourcesContent":["/** @jsxImportSource @emotion/react */\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\nimport colors from '../styles/colors';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport PlaylistView from './PlaylistView';\r\nimport PropTypes from 'prop-types';\r\nimport { removeItemsFromPlaylist } from '../store/actions/playlistAction'\r\n//modal\r\n\r\nconst outerContainerStyling = css`\r\n    position: fixed;\r\n    top: 9%;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1010;\r\n    overflow: scroll;\r\n    background-color: rgba(0, 0, 0, 0.65);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  `;\r\nconst containerStyling = css`\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    div{\r\n      font-size: 40px;\r\n      padding: 10px;\r\n      margin: 5px;\r\n    }\r\n    input{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    textarea{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    .PlaylistDescription{\r\n      height: 50%;\r\n    }\r\n    background-color: floralwhite;\r\n    width: 40%;\r\n    height: 50%;\r\n    border-radius: 8px;\r\n  `;\r\nconst buttonContainerStyling = css`\r\n  display: flex;\r\n  flex-direction: row;\r\n  button{\r\n    width: 45%;\r\n    height: 80%;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    border-radius: 8px;\r\n    border-style: solid;\r\n    border-width: 1px;\r\n\r\n  }\r\n`;\r\n\r\n\r\nconst PlaylistTitle = styled.div`\r\n  width: 100%;\r\n  text-align: center;\r\n  color: ${colors.black};\r\n  font-size: 40px;\r\n  font-weight: bold;\r\n  margin: 20px 0;\r\n  border: 2px solid ${colors.darkGreen};\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst SaveSubPlaylistButton = styled.button`\r\n  position: fixed;\r\n  bottom: 40px;\r\n  right: 12.5%;\r\n  width: 200px;\r\n  height: 60px;\r\n  cursor: pointer;\r\n  border: 0;\r\n  border-radius:10px;\r\n  font-size: 125%;\r\n  color: white;\r\n  background-color: ${colors.darkGreen};\r\n  :hover {\r\n    background-color: ${colors.hoverGreen};\r\n  }\r\n`;\r\n\r\nfunction PlaylistViewColumn(props) {\r\n  const [toggleModal, setToggleModal] = useState(false)\r\n  const [playlistName, setPlaylistName] = useState(\"\")\r\n  const [playlistDecription, setPlaylistDescription] = useState(\"\")\r\n  const { accessToken } = useSelector(state => state.auth)\r\n  const { user } = useSelector(state => state.user)\r\n  const [removedSongUris, setRemovedSongUris] = useState([])\r\n  const dispatch = useDispatch()\r\n  function createModalClicked(e) {\r\n    e.preventDefault();\r\n    makeNewPlaylist(playlistName, playlistDecription)\r\n    setToggleModal(!toggleModal)\r\n  }\r\n  function cancelModalClicked(e) {\r\n    e.preventDefault();\r\n    setToggleModal(!toggleModal)\r\n  }\r\n\r\n  function UpdatePlaylistName(e) {\r\n    setPlaylistName(e.target.value)\r\n  }\r\n  function UpdatePlaylistDescription(e) {\r\n    setPlaylistDescription(e.target.value)\r\n  }\r\n  const styles = css`\r\n    width: 45%;\r\n    float: left;\r\n    padding: 0 20px;\r\n  `;\r\n\r\n  function removeFromplaylist(uri) {\r\n    //TODO: Is there a way to not remove duplicate songs?\r\n    // props.setPlaylist([\r\n    //   ...props.playlist.filter(track => track.uri !== uri),\r\n    //   ...props.addedSongs.filter(track => track.uri !== uri)\r\n    // ])\r\n\r\n    setRemovedSongUris([...removedSongUris, uri])\r\n  }\r\n\r\n  async function makeNewPlaylist(nameOfSong, nameOfPlaylist) {\r\n    const getOptions = (accessToken, url, data) => {\r\n      return {\r\n        url: url,\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + accessToken,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        data: data\r\n      }\r\n    }\r\n    try {\r\n      const url = `https://api.spotify.com/v1/users/${user.id}/playlists`\r\n      axios(getOptions(accessToken, url, {\r\n        'name': nameOfSong,\r\n        'description': nameOfPlaylist,\r\n        'public': 'false'\r\n      }))\r\n        .then(function (response) {\r\n          console.log(\"Make new playlist response:\", response)\r\n          putItemsInPlaylist(response.data.id)\r\n          //setMakingplaylist(false)\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function putItemsInPlaylist(id) {\r\n    const options = {\r\n      url: `https://api.spotify.com/v1/playlists/${id}/tracks?uris=${encodeURIComponent(props.addedSongs.map((uri) => uri.uri))}`,\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': 'Bearer ' + accessToken,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    }\r\n    try {\r\n      axios(options)\r\n        .then(function (response) {\r\n          console.log(\"Putting Items in that new playlist: \", response);\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n  async function savePlaylist() {\r\n\r\n    if (props.playlistId) {\r\n      console.log(\"Adding to this playlist: \", props.playlistId);\r\n      putItemsInPlaylist(props.playlistId)\r\n\r\n      // removedSongUris\r\n\r\n      const body = {\r\n        'tracks': removedSongUris.map((uri) => {\r\n          return { 'uri': uri }\r\n        })\r\n      }\r\n\r\n      console.log(\"BODYYYYYYYYYYYY\", body)\r\n      dispatch(removeItemsFromPlaylist(props.playlistId, body))\r\n    } else {\r\n      console.log(\"Making a new playlist\");\r\n      //TOGGLE MODAL, let the user enter the playlist data\r\n      //onSUBMIT, pass data to makeNewPlaylist\r\n      setToggleModal(!toggleModal)\r\n\r\n    }\r\n  }\r\n\r\n  console.log(\"PlaylistViewColumn props: \", props);\r\n  return (\r\n    <div css={styles}>\r\n      <PlaylistTitle>{props.playlistTitle}</PlaylistTitle>\r\n      {props.menu}\r\n      <PlaylistView\r\n        playlist={props.addedSongs ? props.addedSongs : []}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      <PlaylistView\r\n        playlist={props.playlist}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      {((props.addedSongs && props.addedSongs.length > 0) || removedSongUris.length > 0) &&\r\n        <SaveSubPlaylistButton\r\n          onClick={() => { savePlaylist() }}>\r\n          Save Sub-Playlist\r\n        </SaveSubPlaylistButton>\r\n      }\r\n      <div>\r\n        {toggleModal ? (\r\n          <div css={outerContainerStyling}>\r\n            <form css={containerStyling}>\r\n              <div>New playlist information</div>\r\n              <input type=\"text\" placeholder=\"Playlist name...\" onChange={UpdatePlaylistName} value={playlistName} />\r\n              <textarea className=\"PlaylistDescription\" type=\"text\" placeholder=\"Playlist description...\" onChange={UpdatePlaylistDescription} value={playlistDecription} />\r\n\r\n              <div css={buttonContainerStyling}>\r\n                <button onClick={cancelModalClicked}> Cancel </button>\r\n                <button onClick={createModalClicked}> Add new playlist </button>\r\n              </div>\r\n            </form>\r\n          </div>)\r\n          : null\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nPlaylistViewColumn.propTypes = {\r\n  playlist: PropTypes.object.isRequired,\r\n  addedSongs: PropTypes.array,\r\n  setPlaylist: PropTypes.func.isRequired,\r\n  playlistTitle: PropTypes.string,\r\n  playlistId: PropTypes.string,\r\n  menu: PropTypes.element,\r\n  hasPlusButton: PropTypes.boolean,\r\n  hasMinusButton: PropTypes.boolean,\r\n  onPlusButtonClick: PropTypes.func\r\n}\r\n\r\nPlaylistViewColumn.defaultProps = {\r\n  addedSongs: [],\r\n  playlistTitle: \"\",\r\n  playlistId: \"\",\r\n  menu: null,\r\n  hasPlusButton: false,\r\n  hasMinusButton: false,\r\n  onPlusButtonClick: null\r\n}\r\n\r\nexport default PlaylistViewColumn;\r\n"]},"metadata":{},"sourceType":"module"}