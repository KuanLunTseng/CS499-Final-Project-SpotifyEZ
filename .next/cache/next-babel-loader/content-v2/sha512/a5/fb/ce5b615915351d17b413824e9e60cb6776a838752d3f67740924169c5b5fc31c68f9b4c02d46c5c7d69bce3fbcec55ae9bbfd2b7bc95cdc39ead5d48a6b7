{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\zengg\\\\Desktop\\\\CS499\\\\final-project-team-10-SpotifyEZ\\\\components\\\\PlaylistViewColumn.js\",\n    _s = $RefreshSig$();\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 45%;\\n    float: left;\\n    padding: 0 20px;\\n  \"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  position: fixed;\\n  bottom: 40px;\\n  right: 12.5%;\\n  width: 200px;\\n  height: 60px;\\n  cursor: pointer;\\n  border: 0;\\n  border-radius:10px;\\n  font-size: 125%;\\n  color: white;\\n  background-color: \", \";\\n  :hover {\\n    background-color: \", \";\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  text-align: center;\\n  color: \", \";\\n  font-size: 40px;\\n  font-weight: bold;\\n  margin: 20px 0;\\n  border: 2px solid \", \";\\n  border-radius: 10px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  button{\\n    width: 45%;\\n    height: 80%;\\n    padding: 5px;\\n    margin: 5px;\\n    border-radius: 8px;\\n    border-style: solid;\\n    border-width: 1px;\\n\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    display:flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    div{\\n      font-size: 40px;\\n      padding: 10px;\\n      margin: 5px;\\n    }\\n    input{\\n      padding: 10px;\\n      margin: 5px;\\n      width: 80%;\\n    }\\n    textarea{\\n      padding: 10px;\\n      margin: 5px;\\n      width: 80%;\\n    }\\n    .PlaylistDescription{\\n      height: 50%;\\n    }\\n    background-color: floralwhite;\\n    width: 40%;\\n    height: 50%;\\n    border-radius: 8px;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    position: fixed;\\n    top: 9%;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    z-index: 1010;\\n    overflow: scroll;\\n    background-color: rgba(0, 0, 0, 0.65);\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport colors from '../styles/colors';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PlaylistView from './PlaylistView';\nimport PropTypes from 'prop-types'; //modal\n\nvar outerContainerStyling = css(_templateObject());\nvar containerStyling = css(_templateObject2());\nvar buttonContainerStyling = css(_templateObject3());\nvar PlaylistTitle = styled.div(_templateObject4(), colors.black, colors.darkGreen);\n_c = PlaylistTitle;\nvar SaveSubPlaylistButton = styled.button(_templateObject5(), colors.darkGreen, colors.hoverGreen);\n_c2 = SaveSubPlaylistButton;\n\nfunction PlaylistViewColumn(props) {\n  _s();\n\n  var _useState = useState(false),\n      toggleModal = _useState[0],\n      setToggleModal = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      playlistName = _useState2[0],\n      setPlaylistName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      playlistDecription = _useState3[0],\n      setPlaylistDescription = _useState3[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      accessToken = _useSelector.accessToken;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      user = _useSelector2.user;\n\n  var _useState4 = useState([]),\n      removedSongUris = _useState4[0],\n      setRemovedSongUris = _useState4[1];\n\n  function createModalClicked(e) {\n    e.preventDefault();\n    makeNewPlaylist(playlistName, playlistDecription);\n    setToggleModal(!toggleModal);\n  }\n\n  function cancelModalClicked(e) {\n    e.preventDefault();\n    setToggleModal(!toggleModal);\n  }\n\n  function UpdatePlaylistName(e) {\n    setPlaylistName(e.target.value);\n  }\n\n  function UpdatePlaylistDescription(e) {\n    setPlaylistDescription(e.target.value);\n  }\n\n  var styles = css(_templateObject6());\n\n  function removeFromplaylist(uri) {\n    //TODO: Is there a way to not remove duplicate songs?\n    props.setPlaylist([].concat(_toConsumableArray(props.playlist.filter(function (track) {\n      return track.uri !== uri;\n    })), _toConsumableArray(props.addedSongs.filter(function (track) {\n      return track.uri !== uri;\n    }))));\n    setRemovedSongUris([].concat(_toConsumableArray(removedSongUris), [uri]));\n  }\n\n  function makeNewPlaylist(_x, _x2) {\n    return _makeNewPlaylist.apply(this, arguments);\n  }\n\n  function _makeNewPlaylist() {\n    _makeNewPlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(nameOfSong, nameOfPlaylist) {\n      var getOptions, url;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              getOptions = function getOptions(accessToken, url, data) {\n                return {\n                  url: url,\n                  method: 'POST',\n                  headers: {\n                    'Authorization': 'Bearer ' + accessToken,\n                    'Content-Type': 'application/json'\n                  },\n                  data: data\n                };\n              };\n\n              try {\n                url = \"https://api.spotify.com/v1/users/\".concat(user.id, \"/playlists\");\n                axios(getOptions(accessToken, url, {\n                  'name': nameOfSong,\n                  'description': nameOfPlaylist,\n                  'public': 'false'\n                })).then(function (response) {\n                  console.log(\"Make new playlist response:\", response);\n                  putItemsInPlaylist(response.data.id); //setMakingplaylist(false)\n                });\n              } catch (e) {\n                if (e instanceof DOMException) {\n                  console.log(\"HTTP request aborted\");\n                } else {\n                  console.log(e);\n                }\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _makeNewPlaylist.apply(this, arguments);\n  }\n\n  function putItemsInPlaylist(_x3) {\n    return _putItemsInPlaylist.apply(this, arguments);\n  }\n\n  function _putItemsInPlaylist() {\n    _putItemsInPlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var options;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              options = {\n                url: \"https://api.spotify.com/v1/playlists/\".concat(id, \"/tracks?uris=\").concat(encodeURIComponent(props.addedSongs.map(function (uri) {\n                  return uri.uri;\n                }))),\n                method: 'POST',\n                headers: {\n                  'Authorization': 'Bearer ' + accessToken,\n                  'Content-Type': 'application/json'\n                }\n              };\n\n              try {\n                axios(options).then(function (response) {\n                  console.log(\"Putting Items in that new playlist: \", response);\n                });\n              } catch (e) {\n                if (e instanceof DOMException) {\n                  console.log(\"HTTP request aborted\");\n                } else {\n                  console.log(e);\n                }\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _putItemsInPlaylist.apply(this, arguments);\n  }\n\n  function savePlaylist() {\n    return _savePlaylist.apply(this, arguments);\n  }\n\n  function _savePlaylist() {\n    _savePlaylist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (props.playlistId) {\n                console.log(\"Adding to this playlist: \", props.playlistId);\n                putItemsInPlaylist(props.playlistId);\n              } else {\n                console.log(\"Making a new playlist\"); //TOGGLE MODAL, let the user enter the playlist data\n                //onSUBMIT, pass data to makeNewPlaylist\n\n                setToggleModal(!toggleModal);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _savePlaylist.apply(this, arguments);\n  }\n\n  console.log(\"PlaylistViewColumn props: \", props);\n  return _jsxDEV(\"div\", {\n    css: styles,\n    children: [_jsxDEV(PlaylistTitle, {\n      children: props.playlistTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), props.menu, _jsxDEV(PlaylistView, {\n      playlist: props.addedSongs ? props.addedSongs : [],\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), _jsxDEV(PlaylistView, {\n      playlist: props.playlist,\n      hasPlusButton: props.hasPlusButton,\n      onPlusButtonClick: props.onPlusButtonClick,\n      hasMinusButton: props.hasMinusButton,\n      onMinusButtonClick: removeFromplaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), (props.addedSongs && props.addedSongs.length > 0 || removedSongUris.length > 0) && _jsxDEV(SaveSubPlaylistButton, {\n      onClick: function onClick() {\n        savePlaylist();\n      },\n      children: \"Save Sub-Playlist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }, this), _jsxDEV(\"div\", {\n      children: toggleModal ? _jsxDEV(\"div\", {\n        css: outerContainerStyling,\n        children: _jsxDEV(\"form\", {\n          css: containerStyling,\n          children: [_jsxDEV(\"div\", {\n            children: \"New playlist information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 12\n          }, this), _jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Playlist name...\",\n            onChange: UpdatePlaylistName,\n            value: playlistName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 12\n          }, this), _jsxDEV(\"textarea\", {\n            className: \"PlaylistDescription\",\n            type: \"text\",\n            placeholder: \"Playlist description...\",\n            onChange: UpdatePlaylistDescription,\n            value: playlistDecription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 12\n          }, this), _jsxDEV(\"div\", {\n            css: buttonContainerStyling,\n            children: [_jsxDEV(\"button\", {\n              onClick: cancelModalClicked,\n              children: \" Cancel \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 12\n            }, this), _jsxDEV(\"button\", {\n              onClick: createModalClicked,\n              children: \" Add new playlist \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 8\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PlaylistViewColumn, \"3CFDco+j2888WpoEizwTNdgjRtY=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c3 = PlaylistViewColumn;\nPlaylistViewColumn.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  addedSongs: PropTypes.array,\n  setPlaylist: PropTypes.func.isRequired,\n  playlistTitle: PropTypes.string,\n  playlistId: PropTypes.string,\n  menu: PropTypes.element,\n  hasPlusButton: PropTypes[\"boolean\"],\n  hasMinusButton: PropTypes[\"boolean\"],\n  onPlusButtonClick: PropTypes.func\n};\nPlaylistViewColumn.defaultProps = {\n  addedSongs: [],\n  playlistTitle: \"\",\n  playlistId: \"\",\n  menu: null,\n  hasPlusButton: false,\n  hasMinusButton: false,\n  onPlusButtonClick: null\n};\nexport default PlaylistViewColumn;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"PlaylistTitle\");\n$RefreshReg$(_c2, \"SaveSubPlaylistButton\");\n$RefreshReg$(_c3, \"PlaylistViewColumn\");","map":{"version":3,"sources":["C:/Users/zengg/Desktop/CS499/final-project-team-10-SpotifyEZ/components/PlaylistViewColumn.js"],"names":["css","styled","colors","axios","useEffect","useState","useDispatch","useSelector","PlaylistView","PropTypes","outerContainerStyling","containerStyling","buttonContainerStyling","PlaylistTitle","div","black","darkGreen","SaveSubPlaylistButton","button","hoverGreen","PlaylistViewColumn","props","toggleModal","setToggleModal","playlistName","setPlaylistName","playlistDecription","setPlaylistDescription","state","auth","accessToken","user","removedSongUris","setRemovedSongUris","createModalClicked","e","preventDefault","makeNewPlaylist","cancelModalClicked","UpdatePlaylistName","target","value","UpdatePlaylistDescription","styles","removeFromplaylist","uri","setPlaylist","playlist","filter","track","addedSongs","nameOfSong","nameOfPlaylist","getOptions","url","data","method","headers","id","then","response","console","log","putItemsInPlaylist","DOMException","options","encodeURIComponent","map","savePlaylist","playlistId","playlistTitle","menu","hasPlusButton","onPlusButtonClick","hasMinusButton","length","propTypes","object","isRequired","array","func","string","element","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,GAAT,QAAoB,gBAApB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACE;;AAEA,IAAMC,qBAAqB,GAAGV,GAAH,mBAA3B;AAaA,IAAMW,gBAAgB,GAAGX,GAAH,oBAAtB;AA4BF,IAAMY,sBAAsB,GAACZ,GAAD,oBAA5B;AAgBA,IAAMa,aAAa,GAAGZ,MAAM,CAACa,GAAV,qBAGRZ,MAAM,CAACa,KAHC,EAOGb,MAAM,CAACc,SAPV,CAAnB;KAAMH,a;AAWN,IAAMI,qBAAqB,GAAGhB,MAAM,CAACiB,MAAV,qBAWLhB,MAAM,CAACc,SAXF,EAaHd,MAAM,CAACiB,UAbJ,CAA3B;MAAMF,qB;;AAiBN,SAASG,kBAAT,CAA4BC,KAA5B,EAAmC;AAAA;;AAAA,kBACKhB,QAAQ,CAAC,KAAD,CADb;AAAA,MAC1BiB,WAD0B;AAAA,MACbC,cADa;;AAAA,mBAEOlB,QAAQ,CAAC,EAAD,CAFf;AAAA,MAE1BmB,YAF0B;AAAA,MAEZC,eAFY;;AAAA,mBAGoBpB,QAAQ,CAAC,EAAD,CAH5B;AAAA,MAG1BqB,kBAH0B;AAAA,MAGNC,sBAHM;;AAAA,qBAITpB,WAAW,CAAC,UAAAqB,KAAK;AAAA,WAAIA,KAAK,CAACC,IAAV;AAAA,GAAN,CAJF;AAAA,MAIzBC,WAJyB,gBAIzBA,WAJyB;;AAAA,sBAKhBvB,WAAW,CAAC,UAAAqB,KAAK;AAAA,WAAIA,KAAK,CAACG,IAAV;AAAA,GAAN,CALK;AAAA,MAKzBA,IALyB,iBAKzBA,IALyB;;AAAA,mBAMa1B,QAAQ,CAAC,EAAD,CANrB;AAAA,MAM1B2B,eAN0B;AAAA,MAMTC,kBANS;;AAOjC,WAASC,kBAAT,CAA4BC,CAA5B,EAA8B;AAC5BA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,eAAe,CAACb,YAAD,EAAeE,kBAAf,CAAf;AACAH,IAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AACD;;AACD,WAASgB,kBAAT,CAA4BH,CAA5B,EAA8B;AAC5BA,IAAAA,CAAC,CAACC,cAAF;AACAb,IAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AACD;;AAED,WAASiB,kBAAT,CAA4BJ,CAA5B,EAA8B;AAC5BV,IAAAA,eAAe,CAACU,CAAC,CAACK,MAAF,CAASC,KAAV,CAAf;AACD;;AACD,WAASC,yBAAT,CAAmCP,CAAnC,EAAqC;AACnCR,IAAAA,sBAAsB,CAACQ,CAAC,CAACK,MAAF,CAASC,KAAV,CAAtB;AACD;;AACD,MAAME,MAAM,GAAG3C,GAAH,oBAAZ;;AAMA,WAAS4C,kBAAT,CAA4BC,GAA5B,EAAiC;AAC/B;AACAxB,IAAAA,KAAK,CAACyB,WAAN,8BACKzB,KAAK,CAAC0B,QAAN,CAAeC,MAAf,CAAsB,UAAAC,KAAK;AAAA,aAAIA,KAAK,CAACJ,GAAN,KAAcA,GAAlB;AAAA,KAA3B,CADL,sBAEKxB,KAAK,CAAC6B,UAAN,CAAiBF,MAAjB,CAAwB,UAAAC,KAAK;AAAA,aAAIA,KAAK,CAACJ,GAAN,KAAcA,GAAlB;AAAA,KAA7B,CAFL;AAKAZ,IAAAA,kBAAkB,8BAAKD,eAAL,IAAsBa,GAAtB,GAAlB;AACD;;AArCgC,WAuClBR,eAvCkB;AAAA;AAAA;;AAAA;AAAA,gFAuCjC,iBAA+Bc,UAA/B,EAA2CC,cAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,cAAAA,UADR,GACqB,SAAbA,UAAa,CAACvB,WAAD,EAAcwB,GAAd,EAAmBC,IAAnB,EAA4B;AAC7C,uBAAO;AACHD,kBAAAA,GAAG,EAAEA,GADF;AAEHE,kBAAAA,MAAM,EAAE,MAFL;AAGHC,kBAAAA,OAAO,EAAE;AACP,qCAAiB,YAAY3B,WADtB;AAEP,oCAAgB;AAFT,mBAHN;AAOHyB,kBAAAA,IAAI,EAAEA;AAPH,iBAAP;AASD,eAXH;;AAYE,kBAAI;AACID,gBAAAA,GADJ,8CAC8CvB,IAAI,CAAC2B,EADnD;AAEFvD,gBAAAA,KAAK,CAACkD,UAAU,CAACvB,WAAD,EAAcwB,GAAd,EAAmB;AACjC,0BAAQH,UADyB;AAEjC,iCAAeC,cAFkB;AAGjC,4BAAU;AAHuB,iBAAnB,CAAX,CAAL,CAKGO,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxBC,kBAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,QAA3C;AACAG,kBAAAA,kBAAkB,CAACH,QAAQ,CAACL,IAAT,CAAcG,EAAf,CAAlB,CAFwB,CAGxB;AACD,iBATH;AAUD,eAZD,CAYE,OAAOvB,CAAP,EAAU;AACV,oBAAIA,CAAC,YAAY6B,YAAjB,EAA+B;AAC7BH,kBAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,iBAFD,MAEO;AACLD,kBAAAA,OAAO,CAACC,GAAR,CAAY3B,CAAZ;AACD;AACF;;AA9BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAvCiC;AAAA;AAAA;;AAAA,WAwElB4B,kBAxEkB;AAAA;AAAA;;AAAA;AAAA,mFAwEjC,kBAAkCL,EAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AACQO,cAAAA,OADR,GACkB;AACdX,gBAAAA,GAAG,iDAA0CI,EAA1C,0BAA4DQ,kBAAkB,CAAC7C,KAAK,CAAC6B,UAAN,CAAiBiB,GAAjB,CAAqB,UAACtB,GAAD;AAAA,yBAASA,GAAG,CAACA,GAAb;AAAA,iBAArB,CAAD,CAA9E,CADW;AAEdW,gBAAAA,MAAM,EAAE,MAFM;AAGdC,gBAAAA,OAAO,EAAE;AACP,mCAAiB,YAAY3B,WADtB;AAEP,kCAAgB;AAFT;AAHK,eADlB;;AASE,kBAAI;AACF3B,gBAAAA,KAAK,CAAC8D,OAAD,CAAL,CACGN,IADH,CACQ,UAAUC,QAAV,EAAoB;AACxBC,kBAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDF,QAApD;AACD,iBAHH;AAID,eALD,CAKE,OAAOzB,CAAP,EAAU;AACV,oBAAIA,CAAC,YAAY6B,YAAjB,EAA+B;AAC7BH,kBAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,iBAFD,MAEO;AACLD,kBAAAA,OAAO,CAACC,GAAR,CAAY3B,CAAZ;AACD;AACF;;AApBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxEiC;AAAA;AAAA;;AAAA,WA8FlBiC,YA9FkB;AAAA;AAAA;;AAAA;AAAA,6EA8FjC;AAAA;AAAA;AAAA;AAAA;AAEE,kBAAI/C,KAAK,CAACgD,UAAV,EAAsB;AACpBR,gBAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCzC,KAAK,CAACgD,UAA/C;AACAN,gBAAAA,kBAAkB,CAAC1C,KAAK,CAACgD,UAAP,CAAlB;AACD,eAHD,MAGO;AACLR,gBAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EADK,CAEL;AACA;;AACAvC,gBAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AAED;;AAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA9FiC;AAAA;AAAA;;AA4GjCuC,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CzC,KAA1C;AACA,SACE;AAAK,IAAA,GAAG,EAAEsB,MAAV;AAAA,eACE,QAAC,aAAD;AAAA,gBAAgBtB,KAAK,CAACiD;AAAtB;AAAA;AAAA;AAAA;AAAA,YADF,EAEGjD,KAAK,CAACkD,IAFT,EAGE,QAAC,YAAD;AACE,MAAA,QAAQ,EAAElD,KAAK,CAAC6B,UAAN,GAAkB7B,KAAK,CAAC6B,UAAxB,GAAqC,EADjD;AAEE,MAAA,aAAa,EAAE7B,KAAK,CAACmD,aAFvB;AAGE,MAAA,iBAAiB,EAAEnD,KAAK,CAACoD,iBAH3B;AAIE,MAAA,cAAc,EAAEpD,KAAK,CAACqD,cAJxB;AAKE,MAAA,kBAAkB,EAAE9B;AALtB;AAAA;AAAA;AAAA;AAAA,YAHF,EAUE,QAAC,YAAD;AACE,MAAA,QAAQ,EAAEvB,KAAK,CAAC0B,QADlB;AAEE,MAAA,aAAa,EAAE1B,KAAK,CAACmD,aAFvB;AAGE,MAAA,iBAAiB,EAAEnD,KAAK,CAACoD,iBAH3B;AAIE,MAAA,cAAc,EAAEpD,KAAK,CAACqD,cAJxB;AAKE,MAAA,kBAAkB,EAAE9B;AALtB;AAAA;AAAA;AAAA;AAAA,YAVF,EAiBG,CAAEvB,KAAK,CAAC6B,UAAN,IAAoB7B,KAAK,CAAC6B,UAAN,CAAiByB,MAAjB,GAA0B,CAA/C,IAAqD3C,eAAe,CAAC2C,MAAhB,GAAyB,CAA/E,KACC,QAAC,qBAAD;AACE,MAAA,OAAO,EAAE,mBAAM;AAAEP,QAAAA,YAAY;AAAI,OADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAlBJ,EAuBE;AAAA,gBACA9C,WAAW,GACV;AAAK,QAAA,GAAG,EAAEZ,qBAAV;AAAA,kBACE;AAAM,UAAA,GAAG,EAAEC,gBAAX;AAAA,qBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,WAAW,EAAC,kBAA/B;AAAkD,YAAA,QAAQ,EAAE4B,kBAA5D;AAAgF,YAAA,KAAK,EAAEf;AAAvF;AAAA;AAAA;AAAA;AAAA,kBAFF,EAGE;AAAU,YAAA,SAAS,EAAC,qBAApB;AAAyC,YAAA,IAAI,EAAC,MAA9C;AAAqD,YAAA,WAAW,EAAC,yBAAjE;AAA2F,YAAA,QAAQ,EAAEkB,yBAArG;AAAgI,YAAA,KAAK,EAAEhB;AAAvI;AAAA;AAAA;AAAA;AAAA,kBAHF,EAKA;AAAK,YAAA,GAAG,EAAEd,sBAAV;AAAA,uBACE;AAAQ,cAAA,OAAO,EAAE0B,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAQ,cAAA,OAAO,EAAEJ,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADU,GAaV;AAdD;AAAA;AAAA;AAAA;AAAA,YAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA2CD;;GAxJQd,kB;UAIiBb,W,EACPA,W;;;MALVa,kB;AA0JTA,kBAAkB,CAACwD,SAAnB,GAA+B;AAC7B7B,EAAAA,QAAQ,EAAEtC,SAAS,CAACoE,MAAV,CAAiBC,UADE;AAE7B5B,EAAAA,UAAU,EAAEzC,SAAS,CAACsE,KAFO;AAG7BjC,EAAAA,WAAW,EAAErC,SAAS,CAACuE,IAAV,CAAeF,UAHC;AAI7BR,EAAAA,aAAa,EAAE7D,SAAS,CAACwE,MAJI;AAK7BZ,EAAAA,UAAU,EAAE5D,SAAS,CAACwE,MALO;AAM7BV,EAAAA,IAAI,EAAE9D,SAAS,CAACyE,OANa;AAO7BV,EAAAA,aAAa,EAAE/D,SAAS,WAPK;AAQ7BiE,EAAAA,cAAc,EAAEjE,SAAS,WARI;AAS7BgE,EAAAA,iBAAiB,EAAEhE,SAAS,CAACuE;AATA,CAA/B;AAYA5D,kBAAkB,CAAC+D,YAAnB,GAAkC;AAChCjC,EAAAA,UAAU,EAAE,EADoB;AAEhCoB,EAAAA,aAAa,EAAE,EAFiB;AAGhCD,EAAAA,UAAU,EAAE,EAHoB;AAIhCE,EAAAA,IAAI,EAAE,IAJ0B;AAKhCC,EAAAA,aAAa,EAAE,KALiB;AAMhCE,EAAAA,cAAc,EAAE,KANgB;AAOhCD,EAAAA,iBAAiB,EAAE;AAPa,CAAlC;AAUA,eAAerD,kBAAf","sourcesContent":["/** @jsxImportSource @emotion/react */\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\nimport colors from '../styles/colors';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport PlaylistView from './PlaylistView';\r\nimport PropTypes from 'prop-types';\r\n  //modal\r\n\r\n  const outerContainerStyling = css`\r\n    position: fixed;\r\n    top: 9%;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1010;\r\n    overflow: scroll;\r\n    background-color: rgba(0, 0, 0, 0.65);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  `;\r\n  const containerStyling = css`\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    div{\r\n      font-size: 40px;\r\n      padding: 10px;\r\n      margin: 5px;\r\n    }\r\n    input{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    textarea{\r\n      padding: 10px;\r\n      margin: 5px;\r\n      width: 80%;\r\n    }\r\n    .PlaylistDescription{\r\n      height: 50%;\r\n    }\r\n    background-color: floralwhite;\r\n    width: 40%;\r\n    height: 50%;\r\n    border-radius: 8px;\r\n  `;\r\nconst buttonContainerStyling=css`\r\n  display: flex;\r\n  flex-direction: row;\r\n  button{\r\n    width: 45%;\r\n    height: 80%;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    border-radius: 8px;\r\n    border-style: solid;\r\n    border-width: 1px;\r\n\r\n  }\r\n`;\r\n\r\n\r\nconst PlaylistTitle = styled.div`\r\n  width: 100%;\r\n  text-align: center;\r\n  color: ${colors.black};\r\n  font-size: 40px;\r\n  font-weight: bold;\r\n  margin: 20px 0;\r\n  border: 2px solid ${colors.darkGreen};\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst SaveSubPlaylistButton = styled.button`\r\n  position: fixed;\r\n  bottom: 40px;\r\n  right: 12.5%;\r\n  width: 200px;\r\n  height: 60px;\r\n  cursor: pointer;\r\n  border: 0;\r\n  border-radius:10px;\r\n  font-size: 125%;\r\n  color: white;\r\n  background-color: ${colors.darkGreen};\r\n  :hover {\r\n    background-color: ${colors.hoverGreen};\r\n  }\r\n`;\r\n\r\nfunction PlaylistViewColumn(props) {\r\n  const [toggleModal, setToggleModal] = useState(false)\r\n  const [playlistName, setPlaylistName] = useState(\"\")\r\n  const [playlistDecription, setPlaylistDescription] = useState(\"\")\r\n  const { accessToken } = useSelector(state => state.auth)\r\n  const { user } = useSelector(state => state.user)\r\n  const [removedSongUris, setRemovedSongUris] = useState([])\r\n  function createModalClicked(e){\r\n    e.preventDefault();\r\n    makeNewPlaylist(playlistName, playlistDecription)\r\n    setToggleModal(!toggleModal)\r\n  }\r\n  function cancelModalClicked(e){\r\n    e.preventDefault();\r\n    setToggleModal(!toggleModal)\r\n  }\r\n\r\n  function UpdatePlaylistName(e){\r\n    setPlaylistName(e.target.value)\r\n  }\r\n  function UpdatePlaylistDescription(e){\r\n    setPlaylistDescription(e.target.value)\r\n  }\r\n  const styles = css`\r\n    width: 45%;\r\n    float: left;\r\n    padding: 0 20px;\r\n  `;\r\n\r\n  function removeFromplaylist(uri) {\r\n    //TODO: Is there a way to not remove duplicate songs?\r\n    props.setPlaylist([\r\n      ...props.playlist.filter(track => track.uri !== uri),\r\n      ...props.addedSongs.filter(track => track.uri !== uri)\r\n    ])\r\n\r\n    setRemovedSongUris([...removedSongUris, uri])\r\n  }\r\n\r\n  async function makeNewPlaylist(nameOfSong, nameOfPlaylist) {\r\n    const getOptions = (accessToken, url, data) => {\r\n      return {\r\n          url: url,\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': 'Bearer ' + accessToken,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          data: data\r\n      }\r\n    }\r\n    try {\r\n      const url = `https://api.spotify.com/v1/users/${user.id}/playlists`\r\n      axios(getOptions(accessToken, url, {\r\n        'name': nameOfSong,\r\n        'description': nameOfPlaylist,\r\n        'public': 'false'\r\n      }))\r\n        .then(function (response) {\r\n          console.log(\"Make new playlist response:\", response)\r\n          putItemsInPlaylist(response.data.id)\r\n          //setMakingplaylist(false)\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function putItemsInPlaylist(id) {\r\n    const options = {\r\n      url: `https://api.spotify.com/v1/playlists/${id}/tracks?uris=${encodeURIComponent(props.addedSongs.map((uri) => uri.uri))}`,\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': 'Bearer ' + accessToken,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    }\r\n    try {\r\n      axios(options)\r\n        .then(function (response) {\r\n          console.log(\"Putting Items in that new playlist: \", response);\r\n        })\r\n    } catch (e) {\r\n      if (e instanceof DOMException) {\r\n        console.log(\"HTTP request aborted\");\r\n      } else {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n  async function savePlaylist() {\r\n\r\n    if (props.playlistId) {\r\n      console.log(\"Adding to this playlist: \", props.playlistId);\r\n      putItemsInPlaylist(props.playlistId)\r\n    } else {\r\n      console.log(\"Making a new playlist\");\r\n      //TOGGLE MODAL, let the user enter the playlist data\r\n      //onSUBMIT, pass data to makeNewPlaylist\r\n      setToggleModal(!toggleModal)\r\n\r\n    }\r\n  }\r\n\r\n  console.log(\"PlaylistViewColumn props: \", props);\r\n  return(\r\n    <div css={styles}>\r\n      <PlaylistTitle>{props.playlistTitle}</PlaylistTitle>\r\n      {props.menu}\r\n      <PlaylistView\r\n        playlist={props.addedSongs? props.addedSongs : []}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      <PlaylistView\r\n        playlist={props.playlist}\r\n        hasPlusButton={props.hasPlusButton}\r\n        onPlusButtonClick={props.onPlusButtonClick}\r\n        hasMinusButton={props.hasMinusButton}\r\n        onMinusButtonClick={removeFromplaylist}\r\n      />\r\n      {((props.addedSongs && props.addedSongs.length > 0) || removedSongUris.length > 0) &&\r\n        <SaveSubPlaylistButton\r\n          onClick={() => { savePlaylist() }}>\r\n          Save Sub-Playlist\r\n        </SaveSubPlaylistButton>\r\n      }\r\n      <div>\r\n     {toggleModal? (\r\n       <div css={outerContainerStyling}>\r\n         <form css={containerStyling}>\r\n           <div>New playlist information</div>\r\n           <input type=\"text\" placeholder=\"Playlist name...\" onChange={UpdatePlaylistName} value={playlistName}/>\r\n           <textarea className=\"PlaylistDescription\"type=\"text\" placeholder=\"Playlist description...\" onChange={UpdatePlaylistDescription} value={playlistDecription}/>\r\n\r\n         <div css={buttonContainerStyling}>\r\n           <button onClick={cancelModalClicked}> Cancel </button>\r\n           <button onClick={createModalClicked}> Add new playlist </button>\r\n         </div>\r\n         </form>\r\n       </div>)\r\n     : null\r\n     }\r\n     </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nPlaylistViewColumn.propTypes = {\r\n  playlist: PropTypes.object.isRequired,\r\n  addedSongs: PropTypes.array,\r\n  setPlaylist: PropTypes.func.isRequired,\r\n  playlistTitle: PropTypes.string,\r\n  playlistId: PropTypes.string,\r\n  menu: PropTypes.element,\r\n  hasPlusButton: PropTypes.boolean,\r\n  hasMinusButton: PropTypes.boolean,\r\n  onPlusButtonClick: PropTypes.func\r\n}\r\n\r\nPlaylistViewColumn.defaultProps = {\r\n  addedSongs: [],\r\n  playlistTitle: \"\",\r\n  playlistId: \"\",\r\n  menu: null,\r\n  hasPlusButton: false,\r\n  hasMinusButton: false,\r\n  onPlusButtonClick: null\r\n}\r\n\r\nexport default PlaylistViewColumn;\r\n"]},"metadata":{},"sourceType":"module"}